
user nginx;
worker_processes auto;

error_log /var/log/nginx/error.log notice;
pid /var/run/nginx.pid;
events {
    worker_connections 1024;
}
http {
    include /etc/nginx/mime.types;
    default_type application/octet-stream;
    log_format main '$remote_addr - $remote_user [$time_local] "$request" '
    '$status $body_bytes_sent "$http_referer" '
    '"$http_user_agent" "$http_x_forwarded_for"';
    access_log /var/log/nginx/access.log main;
    sendfile on;
    #tcp_nopush     on;
    keepalive_timeout 65;

    #gzip  on;
    # include /etc/nginx/conf.d/*.conf;
    # server {
    #     # listen       52526;
    #     listen [::]:80;
    #     server_name 49.51.180.81;
    #     root /home/MaLiuWord/Admin/dist;
    #     index index.html index.htm;
    #     # location / {
    #     #     proxy_set_header Upgrade $http_upgrade;
    #     #     proxy_set_header Connection "upgrade";
    #     #     proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    #     #     proxy_set_header Host $host;
    #     #     alias   /home/MaLiuWord/Admin/dist/index.html;
    #     # }

    #     # location / {
    #     #     try_files $uri /index.html;
    #     # }
    #     # location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg)$ {
    #     #     expires 1y;
    #     #     log_not_found off;
    #     # }

    #     error_page 404 /404.html;
    #     location = /404.html {
    #     }
    #     error_page 500 502 503 504 /50x.html;
    #     location = /50x.html {
    #     }
    # }
    server {
        # listen 7000;
        listen 80;
        server_name 49.51.180.81;
        # server_name 49.51.180.81 maliuword.top www.maliuword.top;
        # ssl_certificate /home/MaLiuWord/Egg_Serve/SSL/maliuword.top.pem;
        # ssl_certificate_key /home/MaLiuWord/Egg_Serve/SSL/maliuword.top.key;
        location / {
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header Host $host;
            proxy_pass https://127.0.0.1:7001;
        }
        location /Fraction/gaokao {
            add_header Access-Control-Allow-Origin "*" always;
            add_header Access-Control-Allow-Headers '*';
            add_header Access-Control-Allow-Methods '*';
            add_header Access-Control-Allow-Credentials 'true';
            proxy_pass https://static-data.gaokao.cn/;
        }
        location /Fraction/zjzw {
            add_header Access-Control-Allow-Origin "*" always;
            add_header Access-Control-Allow-Headers '*';
            add_header Access-Control-Allow-Methods '*';
            add_header Access-Control-Allow-Credentials 'true';
            proxy_pass https://api.zjzw.cn/;
        }
        location /Fraction/ {
            root /home/Fraction;
            index index.html index.htm;
        }
        location /MaLiuWord/ {
            root /home/MaLiuWord/Admin;
            index index.html index.htm;
            try_files $uri $uri/ /index.html;
        }
        location /areas_v3 {
            add_header Access-Control-Allow-Origin "*" always;
            add_header Access-Control-Allow-Headers '*';
            add_header Access-Control-Allow-Methods '*';
            add_header Access-Control-Allow-Credentials 'true';
            proxy_pass https://geo.datav.aliyun.com;
        }
        location /easyquery.htm {
            add_header Access-Control-Allow-Origin "*" always;
            add_header Access-Control-Allow-Headers '*';
            add_header Access-Control-Allow-Methods '*';
            add_header Access-Control-Allow-Credentials 'true';
            proxy_pass https://data.stats.gov.cn;
        }
        location /DataV_Screen/ {
            root /home/Big_Screen/React/DataV_Screen;
            index index.html index.htm;
            try_files $uri $uri/ /index.html;
        }
        location /Svg {
            add_header Access-Control-Allow-Origin "*" always;
            add_header Access-Control-Allow-Headers '*';
            add_header Access-Control-Allow-Methods '*';
            add_header Content-Type 'image/svg+xml';
            add_header Access-Control-Allow-Credentials 'true';
            alias /home/Svg;
            # index index.html index.htm;
            # try_files $uri $uri/ /index.html;
        }
    }
}
